PROGRAM         = DRC_Study 
CC              = g++
LD              = g++
CXXFLAGS        = -g -O2 -I$(ROOTSYS)/include -std=c++17
LDFLAGS         = $(LIBS) $(GLIBS) -B/usr/X11R6/lib -B/usr/lib64 
OPT             =
ROOTLIBS        = $(shell root-config --libs)
ROOTGLIBS       = $(shell root-config --glibs)

SSBTREE_INPUTS   = ./analysis/DRCTree.C ./analysis/DRCTree.h

LIBS            = $(ROOTLIBS)
GLIBS           = $(ROOTGLIBS) -L/usr/X11R6/lib -lXext
OBJS            = CommonTools.o DRCTree.o Waveform.o IntADC.o AvgTimeStr.o main_DRCStudy.o
INPUTS	   	= $(MUONID_INPUTS) include/Waveform.hpp src/Waveform.cpp include/IntADC.hpp src/IntADC.cpp include/AvgTimeStr.hpp src/AvgTimeStr.cpp main_DRCStudy.cpp

all: $(OBJS) 															
	$(CC) $(OPT) $(LDFLAGS) -o $(PROGRAM) -g $(OBJS) $(LIBS)

main_DRCStudy.o: main_DRCStudy.cpp $(INPUTS) 
	$(CC) $(CXXFLAGS) -c main_DRCStudy.cpp

DRCTree.o: $(SSBTREE_INPUTS)				
	$(CC) $(CXXFLAGS) -c ./analysis/DRCTree.C

Waveform.o: include/Waveform.hpp src/Waveform.cpp
	$(CC) $(CXXFLAGS) -c ./src/Waveform.cpp

AvgTimeStr.o: include/AvgTimeStr.hpp src/AvgTimeStr.cpp
	$(CC) $(CXXFLAGS) -c ./src/AvgTimeStr.cpp

IntADC.o: include/IntADC.hpp src/IntADC.cpp
	$(CC) $(CXXFLAGS) -c ./src/IntADC.cpp


CommonTools.o: CommonTools.hpp CommonTools.cpp
	$(CC) $(CXXFLAGS) -c CommonTools.cpp
clean:
	-rm -f *~ $(OBJS) core core.*	
	-rm -rf ti_files
	-rm -f $(PROGRAM)
	-rm -f *~;

distclean:						
	-rm -f *~ $(PROGRAM) $(OBJS)
	-rm -rf ti_files

run: $(PROGRAM) $(OBJS)	
	make all
	./$(PROGRAM) 1

